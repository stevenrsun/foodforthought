{"ast":null,"code":"var _jsxFileName = \"/u/kelvinyu/CS373/foodforthought/foodforthoughts/src/components/BarChart.js\";\nimport React, { Component } from 'react';\nimport * as d3 from \"d3\";\nimport d3Tip from \"d3-tip\"; //This code is modified from Simple d3.js bar chart D3: http://bl.ocks.org/d3noob/8952219#bar-data.csv\n//with rainbow function from this codepen: https://codepen.io/chadoh/pen/NRXpKw\n\nclass BarChart extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLoaded: false,\n      bottomText: \"Loading...\"\n    };\n  }\n\n  drawBarGraph() {\n    var margin = {\n      top: 20,\n      right: 20,\n      bottom: 200,\n      left: 40\n    },\n        width = 1250 - margin.left - margin.right,\n        height = 600 - margin.top - margin.bottom;\n    var pad = 20,\n        left_pad = 100;\n    var x = d3.scale.ordinal().rangeRoundBands([0, width], .1);\n    var y = d3.scale.linear().range([height, 0]);\n    var xAxis = d3.svg.axis().scale(x).orient(\"bottom\").ticks(10);\n    var yAxis = d3.svg.axis().scale(y).orient(\"left\").ticks(10);\n    var svg = d3.select(this.props.label).append(\"svg\").attr(\"width\", width + margin.left + margin.right).attr(\"height\", height + margin.top + margin.bottom).append(\"g\").attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\");\n    var data = this.props.data;\n    x.domain(data.map(function (d) {\n      return d.label;\n    }));\n    y.domain([0, d3.max(data, function (d) {\n      return d.value;\n    })]);\n    const tip = d3Tip().attr('class', 'd3-tip').offset([-13, 0]).html(function (d) {\n      return d.label + \": <span style='color:orangered'>\" + d.value + \"</span>\";\n    });\n    svg.call(tip);\n    svg.append(\"g\").attr(\"class\", \"x axis\").attr(\"transform\", \"translate(0,\" + height + \")\").call(xAxis).selectAll(\"text\").style(\"text-anchor\", \"end\").attr(\"dx\", \"-.8em\").attr(\"dy\", \".15em\").attr(\"transform\", \"rotate(-65)\").style(\"font-size\", \"15px\");\n    svg.append(\"g\").attr(\"class\", \"y axis\").call(yAxis).append(\"text\").attr(\"transform\", \"rotate(-90)\").attr(\"y\", 6).attr(\"dy\", \".71em\").style(\"text-anchor\", \"end\").text(this.props.y);\n    svg.selectAll(\"bar\").data(data).enter().append(\"rect\").attr('style', function (d) {\n      return 'fill:hsl(' + (x(d.label) - left_pad) * (360 / (width - left_pad - pad)) + ',100%,65%)';\n    }).attr(\"x\", function (d) {\n      return x(d.label);\n    }).attr(\"width\", x.rangeBand()).attr(\"y\", function (d) {\n      return y(d.value);\n    }).attr(\"height\", function (d) {\n      return height - y(d.value);\n    }).on('mouseover', tip.show).on('mouseout', tip.hide);\n  }\n\n  componentDidUpdate() {\n    if (this.props.isLoaded && !this.state.isLoaded) {\n      this.drawBarGraph();\n      this.setState({\n        isLoaded: true,\n        bottomText: this.props.x\n      });\n    }\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118\n      },\n      __self: this\n    }, this.state.bottomText), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    }));\n  }\n\n}\n\nexport default BarChart;","map":{"version":3,"sources":["/u/kelvinyu/CS373/foodforthought/foodforthoughts/src/components/BarChart.js"],"names":["React","Component","d3","d3Tip","BarChart","constructor","props","state","isLoaded","bottomText","drawBarGraph","margin","top","right","bottom","left","width","height","pad","left_pad","x","scale","ordinal","rangeRoundBands","y","linear","range","xAxis","svg","axis","orient","ticks","yAxis","select","label","append","attr","data","domain","map","d","max","value","tip","offset","html","call","selectAll","style","text","enter","rangeBand","on","show","hide","componentDidUpdate","setState","render"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport * as d3 from \"d3\";\nimport d3Tip  from \"d3-tip\";\n\n\n//This code is modified from Simple d3.js bar chart D3: http://bl.ocks.org/d3noob/8952219#bar-data.csv\n//with rainbow function from this codepen: https://codepen.io/chadoh/pen/NRXpKw\n\nclass BarChart extends Component\n{\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLoaded: false,\n      bottomText: \"Loading...\"\n    }\n  }\n\n  drawBarGraph()\n  {\n    var margin = {top: 20, right: 20, bottom: 200, left: 40},\n      width = 1250 - margin.left - margin.right,\n      height = 600 - margin.top - margin.bottom;\n\n    var pad = 20, left_pad = 100;\n\n    var x = d3.scale.ordinal().rangeRoundBands([0, width], .1);\n\n    var y = d3.scale.linear().range([height, 0]);\n\n    var xAxis = d3.svg.axis()\n        .scale(x)\n        .orient(\"bottom\")\n        .ticks(10);\n\n    var yAxis = d3.svg.axis()\n        .scale(y)\n        .orient(\"left\")\n        .ticks(10);\n\n    var svg = d3.select(this.props.label).append(\"svg\")\n        .attr(\"width\", width + margin.left + margin.right)\n        .attr(\"height\", height + margin.top + margin.bottom)\n      .append(\"g\")\n        .attr(\"transform\",\n              \"translate(\" + margin.left + \",\" + margin.top + \")\");\n\n    var data = this.props.data;\n\n\n\n    x.domain(data.map(function(d) { return d.label; }));\n    y.domain([0, d3.max(data, function(d) { return d.value; })]);\n\n    const tip = d3Tip()\n      .attr('class', 'd3-tip')\n      .offset([-13, 0])\n      .html(function(d) {\n        return d.label + \": <span style='color:orangered'>\" + d.value + \"</span>\";\n      });\n    svg.call(tip);\n\n    svg.append(\"g\")\n      .attr(\"class\", \"x axis\")\n      .attr(\"transform\", \"translate(0,\" + height + \")\")\n      .call(xAxis)\n\n  .selectAll(\"text\")\n          .style(\"text-anchor\", \"end\")\n          .attr(\"dx\", \"-.8em\")\n          .attr(\"dy\", \".15em\")\n          .attr(\"transform\",\"rotate(-65)\")\n          .style(\"font-size\",\"15px\");\n\n\n\n    svg.append(\"g\")\n        .attr(\"class\", \"y axis\")\n        .call(yAxis)\n      .append(\"text\")\n        .attr(\"transform\", \"rotate(-90)\")\n        .attr(\"y\", 6)\n        .attr(\"dy\", \".71em\")\n        .style(\"text-anchor\", \"end\")\n        .text(this.props.y);\n\n    svg.selectAll(\"bar\")\n        .data(data)\n      .enter().append(\"rect\")\n        .attr('style', function (d) { return 'fill:hsl('+(x(d.label)-left_pad)*(360/(width-left_pad-pad))+',100%,65%)' })\n        .attr(\"x\", function(d) { return x(d.label); })\n        .attr(\"width\", x.rangeBand())\n        .attr(\"y\", function(d) { return y(d.value); })\n        .attr(\"height\", function(d) { return height - y(d.value); })\n        .on('mouseover', tip.show)\n        .on('mouseout', tip.hide);\n  }\n\n\n  componentDidUpdate ()\n  {\n    if (this.props.isLoaded && !this.state.isLoaded)\n    {\n      this.drawBarGraph();\n      \n      this.setState({\n        isLoaded : true,\n        bottomText: this.props.x,\n      });\n    }\n  }\n\n\n  render() {\n    return (\n      <div>\n      \n      <h2>{this.state.bottomText}</h2>\n        <br/>\n      </div>\n    );\n  }\n}\n\nexport default BarChart;\n"]},"metadata":{},"sourceType":"module"}