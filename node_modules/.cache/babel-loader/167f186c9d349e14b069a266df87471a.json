{"ast":null,"code":"var _jsxFileName = \"/Users/murray/Developer/coursework/software_engineering_cs373/foodforthoughts/src/pages/disease.js\";\nimport React from 'react';\nimport Select from 'react-select';\nimport backImage from '../photos/disease_background.jpg';\nimport { DiseaseCardGrid } from \"../components/infocard.js\";\nimport { PageNav } from '../components/pageNav.js';\nimport { SearchCardGrid } from '../components/searchCard.js';\nimport '../App.css';\nimport { Dropdown, DropdownToggle, DropdownMenu, DropdownItem } from 'reactstrap';\nimport { thisExpression } from '@babel/types';\n\nclass disease extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.compare = (a, b) => {\n      let key = 'name';\n\n      if (this.state.filterKey != 'init') {\n        key = this.state.filterKey;\n      }\n\n      if (a[key] < b[key]) {\n        return -1;\n      }\n\n      if (a[key] > b[key]) {\n        return 1;\n      }\n\n      return 0;\n    };\n\n    this.sort = () => {\n      this.setState({\n        elements: this.state.elements.sort(this.compare)\n      });\n    };\n\n    this.incrementPage = () => {\n      const page = this.state.page + 1;\n      this.setState({\n        page\n      });\n    };\n\n    this.decrementPage = () => {\n      const page = this.state.page - 1;\n      this.setState({\n        page\n      });\n    };\n\n    this.goFirstPage = () => {\n      const page = 0;\n      this.setState({\n        page\n      });\n    };\n\n    this.goLastPage = () => {\n      const page = Math.ceil(this.state.elements.length / 9) - 1;\n      this.setState({\n        page\n      });\n    };\n\n    this.styles = {\n      image: {\n        width: 200,\n        height: 150\n      },\n      background: {\n        backgroundImage: \"url(\".concat(backImage),\n        height: '210vh',\n        // 220 vh\n        width: '100vw',\n        overflow: 'auto',\n        backgroundRepeat: 'no-repeat',\n        backgroundPosition: 'center',\n        backgroundSize: 'cover',\n        backgroundAttachment: 'fixed'\n      },\n      header: {\n        textAlign: 'center',\n        color: 'aliceblue',\n        fontSize: 150\n      }\n    };\n\n    this.toggle = () => {\n      this.setState(prevState => ({\n        dropdownOpen: !prevState.dropdownOpen\n      }));\n    };\n\n    this.toggleMid = () => {\n      this.setState(prevState => ({\n        midDropdownOpen: !prevState.midDropdownOpen\n      }));\n    };\n\n    this.changeFilterTag = label => {\n      this.setState({\n        dropdownLabel: label.currentTarget.getAttribute(\"id\"),\n        filterKey: label.currentTarget.getAttribute(\"fkey\")\n      });\n    };\n\n    this.handleChange = ({\n      target\n    }) => {\n      this.setState({\n        [target.name]: target.value\n      });\n    };\n\n    this.handleReset = () => {\n      this.setState({\n        elements: this.state.resetElements,\n        causeFilter: [],\n        symptomFilter: [],\n        selectedOptionsCause: [],\n        selectedOptionsSymptom: [],\n        min: null,\n        max: null\n      });\n    };\n\n    this.applyFilter = () => {\n      if (this.state.dropdownLabel != 'Causes' && this.state.dropdownLabel != 'Symptoms') {\n        var elements = this.state.elements.filter(dict => {\n          return dict[this.state.filterKey] >= this.state.min && dict[this.state.filterKey] <= this.state.max;\n        });\n        this.setState({\n          elements\n        });\n      } else {\n        var elements = this.state.elements.filter(dict => {\n          var pass = true;\n          let i;\n\n          for (i = 0; i < this.state.causeFilter.length; i++) if (!dict['cause'].includes(this.state.causeFilter[i])) pass = false;\n\n          for (i = 0; i < this.state.symptomFilter.length; i++) if (!dict['symptom'].includes(this.state.symptomFilter[i])) pass = false;\n\n          return pass;\n        });\n        this.setState({\n          elements\n        });\n      }\n    };\n\n    this.handleSelectCause = selectedOptionsCause => {\n      this.setState({\n        selectedOptionsCause\n      });\n      if (this.state.dropdownLabel === 'Causes' && selectedOptionsCause != null) this.setState({\n        causeFilter: selectedOptionsCause.map(o => o.value)\n      });\n    };\n\n    this.handleSelectSymptom = selectedOptionsSymptom => {\n      this.setState({\n        selectedOptionsSymptom\n      });\n      if (this.state.dropdownLabel === 'Symptoms' && selectedOptionsSymptom != null) this.setState({\n        symptomFilter: selectedOptionsSymptom.map(o => o.value)\n      });\n    };\n\n    this.search = () => {\n      var params = this.state.searchParams.split(' ');\n      var searchElements = this.state.elements.filter(dict => {\n        var found = false;\n\n        for (let key in dict) {\n          let i;\n\n          for (i = 0; i < params.length; i++) {\n            if (typeof dict[key] == 'string' && dict[key].toLowerCase().includes(params[i].toLowerCase())) found = true;else if (typeof dict[key] != 'string' && dict[key].toString().toLowerCase().includes(params[i].toLowerCase())) found = true;\n          }\n        }\n\n        return found;\n      });\n      this.setState({\n        searchElements: searchElements,\n        elements: []\n      });\n    };\n\n    this.render = () => {\n      var filterComp;\n      var dropdownSet = new Set();\n      var dropdownList = [];\n\n      if (this.state.dropdownLabel === 'Causes') {\n        let i;\n\n        for (i = 0; i < this.state.elements.length; i++) {\n          var dict = this.state.elements[i];\n          var attributes = dict[this.state.filterKey].split(',');\n          let j;\n\n          for (j = 0; j < attributes.length; j++) dropdownSet.add(attributes[j]);\n        }\n\n        dropdownList = Array.from(dropdownSet);\n        var dictList = [];\n\n        for (i = 0; i < dropdownList.length; i++) {\n          dictList.push({\n            value: dropdownList[i],\n            label: dropdownList[i].charAt(0).toUpperCase() + dropdownList[i].slice(1)\n          });\n        }\n\n        filterComp = React.createElement(\"div\", {\n          style: {\n            width: '700px'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 210\n          },\n          __self: this\n        }, React.createElement(Select, {\n          className: \"ml-2\",\n          isMulti: true,\n          closeMenuOnSelect: false,\n          value: this.state.selectedOptionsCause,\n          onChange: this.handleSelectCause,\n          options: dictList,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 211\n          },\n          __self: this\n        }));\n      } else if (this.state.dropdownLabel === 'Symptoms') {\n        let i;\n\n        for (i = 0; i < this.state.elements.length; i++) {\n          var dict = this.state.elements[i];\n          var attributes = dict[this.state.filterKey].split(',');\n          let j;\n\n          for (j = 0; j < attributes.length; j++) dropdownSet.add(attributes[j]);\n        }\n\n        dropdownList = Array.from(dropdownSet);\n        var dictList = [];\n\n        for (i = 0; i < dropdownList.length; i++) {\n          dictList.push({\n            value: dropdownList[i],\n            label: dropdownList[i].charAt(0).toUpperCase() + dropdownList[i].slice(1)\n          });\n        }\n\n        filterComp = React.createElement(\"div\", {\n          style: {\n            width: '700px'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 228\n          },\n          __self: this\n        }, React.createElement(Select, {\n          className: \"ml-2\",\n          isMulti: true,\n          closeMenuOnSelect: false,\n          value: this.state.selectedOptionsSymptom,\n          onChange: this.handleSelectSymptom,\n          options: dictList,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 229\n          },\n          __self: this\n        }));\n      } else filterComp = React.createElement(\"form\", {\n        class: \"form-inline\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 233\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        class: \"sr-only\",\n        for: \"inlineFormInputName2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 234\n        },\n        __self: this\n      }, \"Name\"), React.createElement(\"input\", {\n        type: \"number\",\n        min: \"0\",\n        name: \"min\",\n        value: this.state.min,\n        onChange: this.handleChange,\n        class: \"form-control mb-2 ml-4 mr-sm-2\",\n        id: \"inlineFormInputName2\",\n        placeholder: \"Min\",\n        style: {\n          width: '60px'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 235\n        },\n        __self: this\n      }), React.createElement(\"label\", {\n        class: \"sr-only\",\n        for: \"inlineFormInputName2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 236\n        },\n        __self: this\n      }, \"Name\"), React.createElement(\"input\", {\n        type: \"number\",\n        min: \"0\",\n        name: \"max\",\n        value: this.state.max,\n        onChange: this.handleChange,\n        class: \"form-control mb-2 ml-1 mr-sm-2\",\n        id: \"inlineFormInputName2\",\n        placeholder: \"Max\",\n        style: {\n          width: '60px'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 237\n        },\n        __self: this\n      }));\n\n      return React.createElement(\"div\", {\n        className: \"img-fluid\",\n        style: this.styles.background,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 241\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        class: \"display-1 mb-4\",\n        style: this.styles.header,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 242\n        },\n        __self: this\n      }, \"Disease\", React.createElement(\"small\", {\n        style: {\n          color: 'orange'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 243\n        },\n        __self: this\n      }, \" (\", this.state.elements.length, \")\")), React.createElement(\"div\", {\n        class: \"justify-content-md-center row mb-5\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 245\n        },\n        __self: this\n      }, React.createElement(Form, {\n        inline: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 246\n        },\n        __self: this\n      }, React.createElement(FormControl, {\n        onSubmit: this.search,\n        onChange: this.handleChange,\n        name: \"searchParams\",\n        value: this.state.searchParams,\n        type: \"text\",\n        placeholder: \"Search for retaurants\",\n        className: \"mr-sm-2\",\n        style: {\n          width: '350px'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 247\n        },\n        __self: this\n      }), React.createElement(Button, {\n        style: {\n          color: 'black'\n        },\n        variant: \"warning\",\n        onClick: this.search,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 248\n        },\n        __self: this\n      }, \"Search\"))), React.createElement(\"div\", {\n        class: \"justify-content-md-center row mb-5\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 252\n        },\n        __self: this\n      }, React.createElement(Dropdown, {\n        isOpen: this.state.dropdownOpen,\n        toggle: this.toggle,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 253\n        },\n        __self: this\n      }, React.createElement(DropdownToggle, {\n        color: \"warning\",\n        caret: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 254\n        },\n        __self: this\n      }, this.state.dropdownLabel), React.createElement(DropdownMenu, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 257\n        },\n        __self: this\n      }, React.createElement(DropdownItem, {\n        onClick: this.changeFilterTag,\n        id: \"Average age affected\",\n        fkey: \"age\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 258\n        },\n        __self: this\n      }, \"Average age affected\"), React.createElement(DropdownItem, {\n        onClick: this.changeFilterTag,\n        id: \"Causes\",\n        fkey: \"cause\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 259\n        },\n        __self: this\n      }, \"Causes\"), React.createElement(DropdownItem, {\n        onClick: this.changeFilterTag,\n        id: \"Deaths per year\",\n        fkey: \"deaths\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 260\n        },\n        __self: this\n      }, \"Deaths per year\"), React.createElement(DropdownItem, {\n        onClick: this.changeFilterTag,\n        id: \"Symptoms\",\n        fkey: \"symptom\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 261\n        },\n        __self: this\n      }, \"Symptoms\"), React.createElement(DropdownItem, {\n        onClick: this.changeFilterTag,\n        id: \"Diagnosed per year\",\n        fkey: \"frequency\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 262\n        },\n        __self: this\n      }, \"Diagnosed per year\"))), filterComp, React.createElement(\"button\", {\n        class: \"btn btn-warning ml-4\",\n        onClick: this.applyFilter,\n        style: {\n          height: '37px'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 266\n        },\n        __self: this\n      }, \"Filter\"), React.createElement(\"button\", {\n        class: \"btn btn-warning ml-4\",\n        onClick: this.sort,\n        style: {\n          height: '37px'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 267\n        },\n        __self: this\n      }, \"Sort\"), React.createElement(\"button\", {\n        class: \"btn btn-primary ml-3\",\n        onClick: this.handleReset,\n        style: {\n          height: '37px'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 268\n        },\n        __self: this\n      }, \"Reset\")), React.createElement(SearchCardGrid, {\n        link: this.state.link,\n        elements: this.state.searchElements,\n        params: this.state.searchParams,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 270\n        },\n        __self: this\n      }), React.createElement(DiseaseCardGrid, {\n        link: this.state.link,\n        elements: this.state.elements,\n        currentPage: this.state.page,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 271\n        },\n        __self: this\n      }), React.createElement(PageNav, {\n        label: \"Disease Page Navigator\",\n        page: this.state.page,\n        decrementPage: this.decrementPage,\n        incrementPage: this.incrementPage,\n        lastPage: this.state.elements.length / 9,\n        goFirstPage: this.goFirstPage,\n        goLastPage: this.goLastPage,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 272\n        },\n        __self: this\n      }), React.createElement(\"p\", {\n        class: \"let\",\n        style: {\n          fontSize: 30,\n          color: 'aliceblue',\n          textAlign: 'center'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 274\n        },\n        __self: this\n      }, \"of \", Math.ceil(this.state.elements.length / 9)));\n    };\n\n    this.state = {\n      elements: [],\n      resetElements: [],\n      searchElements: [],\n      page: 0,\n      link: '/DiseasePage',\n      dropdownOpen: false,\n      midDropdownOpen: false,\n      dropdownLabel: 'Attributes',\n      causeFilter: [],\n      symptomFilter: [],\n      filterKey: 'init',\n      min: null,\n      max: null,\n      selectedOptionsSymptom: [],\n      selectedOptionsCause: [],\n      searchParams: ''\n    };\n  }\n\n  componentDidMount() {\n    let url = 'https://cors-anywhere.herokuapp.com/http://api.foodforthoughtt.me/disease';\n    fetch(url).then(response => response.json()).then(data => {\n      this.setState({\n        elements: data,\n        resetElements: data\n      });\n    });\n  }\n\n}\n\nexport default disease;","map":{"version":3,"sources":["/Users/murray/Developer/coursework/software_engineering_cs373/foodforthoughts/src/pages/disease.js"],"names":["React","Select","backImage","DiseaseCardGrid","PageNav","SearchCardGrid","Dropdown","DropdownToggle","DropdownMenu","DropdownItem","thisExpression","disease","Component","constructor","props","compare","a","b","key","state","filterKey","sort","setState","elements","incrementPage","page","decrementPage","goFirstPage","goLastPage","Math","ceil","length","styles","image","width","height","background","backgroundImage","overflow","backgroundRepeat","backgroundPosition","backgroundSize","backgroundAttachment","header","textAlign","color","fontSize","toggle","prevState","dropdownOpen","toggleMid","midDropdownOpen","changeFilterTag","label","dropdownLabel","currentTarget","getAttribute","handleChange","target","name","value","handleReset","resetElements","causeFilter","symptomFilter","selectedOptionsCause","selectedOptionsSymptom","min","max","applyFilter","filter","dict","pass","i","includes","handleSelectCause","map","o","handleSelectSymptom","search","params","searchParams","split","searchElements","found","toLowerCase","toString","render","filterComp","dropdownSet","Set","dropdownList","attributes","j","add","Array","from","dictList","push","charAt","toUpperCase","slice","link","componentDidMount","url","fetch","then","response","json","data"],"mappings":"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","sourcesContent":["import React from 'react';\nimport Select from 'react-select';\nimport backImage from '../photos/disease_background.jpg';\nimport {DiseaseCardGrid} from \"../components/infocard.js\";\nimport {PageNav} from '../components/pageNav.js';\nimport {SearchCardGrid} from '../components/searchCard.js';\nimport '../App.css';\nimport { Dropdown, DropdownToggle, DropdownMenu, DropdownItem } from 'reactstrap';\nimport { thisExpression } from '@babel/types';\n\nclass disease extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      elements: [],\n      resetElements: [],\n      searchElements: [],\n      page: 0,\n      link: '/DiseasePage',\n      dropdownOpen: false,\n      midDropdownOpen: false,\n      dropdownLabel: 'Attributes',\n      causeFilter: [],\n      symptomFilter: [],\n      filterKey: 'init',\n      min: null,\n      max: null,\n      selectedOptionsSymptom: [],\n      selectedOptionsCause: [],\n      searchParams: ''\n    }\n  }\n  \n  componentDidMount() {\n    let url = 'https://cors-anywhere.herokuapp.com/http://api.foodforthoughtt.me/disease';\n    fetch(url)\n    .then(response => response.json())\n    .then(data => {\n      this.setState({elements: data, resetElements: data});\n    })\n  }\n\n  compare = (a, b) => {\n    let key = 'name';\n    if (this.state.filterKey != 'init') {\n      key = this.state.filterKey;\n    }\n    if ( a[key] < b[key] ){\n      return -1;\n    }\n    if ( a[key] > b[key] ){\n      return 1;\n    }\n    return 0;\n  }\n\n  sort = () => {\n    this.setState({elements: this.state.elements.sort(this.compare)});\n  }\n\n  incrementPage = () => {\n    const page = this.state.page + 1;\n    this.setState({page});\n  }\n\n  decrementPage = () => {\n    const page = this.state.page - 1;\n    this.setState({page});\n  }\n\n  goFirstPage = () => {\n    const page = 0;\n    this.setState({page});\n  }\n\n  goLastPage = () => {\n    const page = Math.ceil(this.state.elements.length/9) - 1;\n    this.setState({page});\n  }\n\n  styles = {\n    image: {\n      width: 200,\n      height: 150,\n    },\n\n    background:{\n      backgroundImage: `url(${backImage}`,\n      height: '210vh', // 220 vh\n      width: '100vw',\n      overflow: 'auto',\n      backgroundRepeat: 'no-repeat',\n      backgroundPosition: 'center',\n      backgroundSize: 'cover',\n      backgroundAttachment: 'fixed'\n    },\n\n    header: {\n      textAlign: 'center',\n      color: 'aliceblue',\n      fontSize: 150\n    },\n  };\n\n  toggle = () => {\n    this.setState(prevState => ({\n      dropdownOpen: !prevState.dropdownOpen\n    }));\n  }\n\n  toggleMid = () => {\n    this.setState(prevState => ({\n      midDropdownOpen: !prevState.midDropdownOpen\n    }));\n  }\n  \n  changeFilterTag = (label) => {\n    this.setState({dropdownLabel: label.currentTarget.getAttribute(\"id\"), filterKey: label.currentTarget.getAttribute(\"fkey\")})\n  }\n  \n  handleChange = ({target}) => {\n    this.setState({[target.name]: target.value})\n  }\n  \n  handleReset = () => {\n    this.setState({\n      elements: this.state.resetElements, \n      causeFilter: [], \n      symptomFilter: [], \n      selectedOptionsCause: [], \n      selectedOptionsSymptom: [],\n      min: null,\n      max: null\n    })\n  }\n  \n  applyFilter = () => {\n    if(this.state.dropdownLabel != 'Causes' && this.state.dropdownLabel != 'Symptoms') {\n      var elements = this.state.elements.filter(dict => {\n          return (dict[this.state.filterKey] >= this.state.min && dict[this.state.filterKey] <= this.state.max)   \n        })\n      this.setState({elements})\n    }\n    else {\n      var elements = this.state.elements.filter(dict => {\n          var pass = true;\n          let i;\n          for(i=0; i<this.state.causeFilter.length; i++)\n            if(!dict['cause'].includes(this.state.causeFilter[i]))\n              pass = false;\n          for(i=0; i<this.state.symptomFilter.length; i++)\n            if(!dict['symptom'].includes(this.state.symptomFilter[i]))\n              pass = false;\n          return pass;\n      })\n      this.setState({elements})\n    }\n  }\n\n  handleSelectCause = (selectedOptionsCause) => {\n    this.setState({selectedOptionsCause});\n    if(this.state.dropdownLabel === 'Causes' && selectedOptionsCause != null)\n      this.setState({causeFilter: selectedOptionsCause.map(o => o.value)})\n  }\n\n  handleSelectSymptom = (selectedOptionsSymptom) => {\n    this.setState({selectedOptionsSymptom})\n    if(this.state.dropdownLabel === 'Symptoms' && selectedOptionsSymptom!= null)\n      this.setState({symptomFilter: selectedOptionsSymptom.map(o => o.value)})\n  }\n\n  search = () => {\n    var params = this.state.searchParams.split(' ');\n    var searchElements = this.state.elements.filter(dict => \n      {\n        var found = false;\n        for(let key in dict) {\n          let i;\n          for(i=0; i<params.length; i++) {\n            if(typeof(dict[key]) == 'string' && dict[key].toLowerCase().includes((params[i]).toLowerCase()))\n              found = true;\n            else if(typeof(dict[key]) != 'string' && dict[key].toString().toLowerCase().includes((params[i]).toLowerCase()))\n              found = true;\n          }\n        }\n        return found;\n      });\n    this.setState({searchElements: searchElements, elements: []})\n  }\n  \n  render = () => {\n    var filterComp;\n    var dropdownSet = new Set();\n    var dropdownList = [];\n    if(this.state.dropdownLabel === 'Causes') {\n      let i;\n      for (i=0; i<this.state.elements.length; i++) {\n        var dict = this.state.elements[i];\n        var attributes = dict[this.state.filterKey].split(',');\n        let j;\n        for(j=0; j<attributes.length; j++)\n          dropdownSet.add(attributes[j]);\n      }\n      dropdownList = Array.from(dropdownSet);\n      var dictList = [];\n      for(i=0; i<dropdownList.length; i++){\n        dictList.push({value: dropdownList[i], label: dropdownList[i].charAt(0).toUpperCase() + dropdownList[i].slice(1)});\n      }\n      filterComp = <div style={{width: '700px'}}>\n      <Select className=\"ml-2\" isMulti closeMenuOnSelect={false} value={this.state.selectedOptionsCause} onChange={this.handleSelectCause} options={dictList}/>\n      </div>;\n    }\n    else if(this.state.dropdownLabel === 'Symptoms') {\n      let i;\n      for (i=0; i<this.state.elements.length; i++) {\n        var dict = this.state.elements[i];\n        var attributes = dict[this.state.filterKey].split(',');\n        let j;\n        for(j=0; j<attributes.length; j++)\n          dropdownSet.add(attributes[j]);\n      }\n      dropdownList = Array.from(dropdownSet);\n      var dictList = [];\n      for(i=0; i<dropdownList.length; i++){\n        dictList.push({value: dropdownList[i], label: dropdownList[i].charAt(0).toUpperCase() + dropdownList[i].slice(1)});\n      }\n      filterComp = <div style={{width: '700px'}}>\n      <Select className=\"ml-2\" isMulti closeMenuOnSelect={false} value={this.state.selectedOptionsSymptom} onChange={this.handleSelectSymptom} options={dictList}/>\n      </div>;\n    }\n    else \n      filterComp = <form class=\"form-inline\">\n      <label class=\"sr-only\" for=\"inlineFormInputName2\">Name</label>\n      <input type=\"number\" min=\"0\" name=\"min\" value={this.state.min} onChange={this.handleChange} class=\"form-control mb-2 ml-4 mr-sm-2\" id=\"inlineFormInputName2\" placeholder=\"Min\" style={{width: '60px'}}></input>\n      <label class=\"sr-only\" for=\"inlineFormInputName2\">Name</label>\n      <input type=\"number\" min=\"0\" name=\"max\" value={this.state.max} onChange={this.handleChange} class=\"form-control mb-2 ml-1 mr-sm-2\" id=\"inlineFormInputName2\" placeholder=\"Max\" style={{width: '60px'}}></input>\n      </form>;\n    \n    return (\n      <div className=\"img-fluid\" style={this.styles.background}>\n        <h1 class=\"display-1 mb-4\" style={this.styles.header}>Disease\n        <small style={{color:'orange'}}> ({this.state.elements.length})</small></h1>\n\n        <div class=\"justify-content-md-center row mb-5\">\n            <Form inline>\n                  <FormControl onSubmit={this.search} onChange={this.handleChange} name=\"searchParams\" value={this.state.searchParams} type=\"text\" placeholder=\"Search for retaurants\" className=\"mr-sm-2\" style={{width: '350px'}} />\n                  <Button style={{color: 'black'}} variant=\"warning\" onClick={this.search}>Search</Button>\n            </Form>\n          </div>\n          \n        <div class=\"justify-content-md-center row mb-5\">\n          <Dropdown isOpen={this.state.dropdownOpen} toggle={this.toggle}>\n            <DropdownToggle color=\"warning\" caret>\n              {this.state.dropdownLabel}\n            </DropdownToggle>\n            <DropdownMenu>\n              <DropdownItem onClick={this.changeFilterTag} id='Average age affected' fkey='age'>Average age affected</DropdownItem>\n              <DropdownItem onClick={this.changeFilterTag} id='Causes' fkey='cause'>Causes</DropdownItem>\n              <DropdownItem onClick={this.changeFilterTag} id='Deaths per year' fkey='deaths'>Deaths per year</DropdownItem>\n              <DropdownItem onClick={this.changeFilterTag} id='Symptoms' fkey='symptom'>Symptoms</DropdownItem>\n              <DropdownItem onClick={this.changeFilterTag} id='Diagnosed per year' fkey='frequency'>Diagnosed per year</DropdownItem>\n            </DropdownMenu>\n          </Dropdown>\n          {filterComp}\n          <button class=\"btn btn-warning ml-4\" onClick={this.applyFilter} style={{height: '37px'}}>Filter</button>\n          <button class=\"btn btn-warning ml-4\" onClick={this.sort} style={{height: '37px'}}>Sort</button>\n          <button class=\"btn btn-primary ml-3\" onClick={this.handleReset} style={{height: '37px'}}>Reset</button>\n        </div>\n        <SearchCardGrid link={this.state.link} elements={this.state.searchElements} params={this.state.searchParams}/>\n        <DiseaseCardGrid link={this.state.link} elements={this.state.elements} currentPage={this.state.page}/>\n        <PageNav label='Disease Page Navigator' page={this.state.page} decrementPage = {this.decrementPage}\n         incrementPage = {this.incrementPage} lastPage={this.state.elements.length/9} goFirstPage = {this.goFirstPage} goLastPage = {this.goLastPage}/>\n        <p class=\"let\" style={{fontSize: 30, color: 'aliceblue', textAlign: 'center'}}>of {Math.ceil(this.state.elements.length/9)}</p>\n      </div> \n    )\n  }\n}\n\nexport default disease"]},"metadata":{},"sourceType":"module"}