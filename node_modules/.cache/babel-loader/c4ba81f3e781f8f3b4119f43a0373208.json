{"ast":null,"code":"var _jsxFileName = \"/Users/murray/Developer/coursework/software_engineering_cs373/foodforthoughts/src/pages/restaurant.js\";\nimport React from 'react';\nimport Select from 'react-select';\nimport backImage from '../photos/rest_image.jpg';\nimport { RestaurantCardGrid } from \"../components/infocard.js\";\nimport { PageNav } from '../components/pageNav.js';\nimport { SearchCardGrid } from '../components/searchCard.js';\nimport { Form, Button, FormControl } from 'react-bootstrap';\nimport '../App.css';\nimport { Dropdown, DropdownToggle, DropdownMenu, DropdownItem } from 'reactstrap';\n\nclass Restaurant extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.search = () => {\n      var params = this.state.searchParams.split(' ');\n      var searchElements = this.state.elements.filter(dict => {\n        var found = false;\n\n        for (let key in dict) {\n          let i;\n\n          for (i = 0; i < params.length; i++) {\n            if (typeof dict[key] == 'string' && dict[key].toLowerCase().includes(params[i].toLowerCase())) found = true;else if (typeof dict[key] != 'string' && dict[key].toString().toLowerCase().includes(params[i].toLowerCase())) found = true;\n          }\n        }\n\n        return found;\n      });\n      this.setState({\n        searchElements: searchElements,\n        elements: []\n      });\n    };\n\n    this.compare = (a, b) => {\n      let key = 'name';\n\n      if (this.state.dropdownLabel != 'Attributes') {\n        key = this.state.dropdownLabel.charAt(0).toLowerCase() + this.state.dropdownLabel.slice(1);\n      }\n\n      if (a[key] < b[key]) {\n        return -1;\n      }\n\n      if (a[key] > b[key]) {\n        return 1;\n      }\n\n      return 0;\n    };\n\n    this.sort = () => {\n      this.setState({\n        elements: this.state.elements.sort(this.compare)\n      });\n    };\n\n    this.incrementPage = () => {\n      const page = this.state.page + 1;\n      this.setState({\n        page\n      });\n    };\n\n    this.decrementPage = () => {\n      const page = this.state.page - 1;\n      this.setState({\n        page\n      });\n    };\n\n    this.goFirstPage = () => {\n      const page = 0;\n      this.setState({\n        page\n      });\n    };\n\n    this.goLastPage = () => {\n      const page = Math.ceil(this.state.elements.length / 9) - 1;\n      this.setState({\n        page\n      });\n    };\n\n    this.styles = {\n      image: {\n        width: 200,\n        height: 150\n      },\n      background: {\n        backgroundImage: \"url(\".concat(backImage),\n        height: '210vh',\n        // 220 vh\n        width: '100vw',\n        overflow: 'auto',\n        backgroundRepeat: 'no-repeat',\n        backgroundPosition: 'center',\n        backgroundSize: 'cover',\n        backgroundAttachment: 'fixed'\n      },\n      header: {\n        textAlign: 'center',\n        color: 'aliceblue',\n        fontSize: 150\n      }\n    };\n\n    this.toggle = () => {\n      this.setState(prevState => ({\n        dropdownOpen: !prevState.dropdownOpen\n      }));\n    };\n\n    this.toggleMid = () => {\n      this.setState(prevState => ({\n        midDropdownOpen: !prevState.midDropdownOpen\n      }));\n    };\n\n    this.changeFilterTag = label => {\n      this.setState({\n        dropdownLabel: label.currentTarget.getAttribute(\"id\"),\n        filterKey: label.currentTarget.getAttribute(\"fkey\")\n      });\n    };\n\n    this.handleChange = ({\n      target\n    }) => {\n      this.setState({\n        [target.name]: target.value\n      });\n    };\n\n    this.handleReset = () => {\n      this.setState({\n        elements: this.state.resetElements,\n        searchElements: [],\n        cuisineFilter: [],\n        locationFilter: [],\n        costFilter: [],\n        selectedOptionsCuisine: [],\n        selectedOptionsLocation: [],\n        selectedOptionsCost: [],\n        min: null,\n        max: null\n      });\n    };\n\n    this.applyFilter = () => {\n      if (this.state.dropdownLabel === 'Rating' || this.state.dropdownLabel === 'Yelp Reviews') {\n        var elements = this.state.elements.filter(dict => {\n          return dict[this.state.filterKey] >= this.state.min && dict[this.state.filterKey] <= this.state.max;\n        });\n        this.setState({\n          elements\n        });\n      } else {\n        var elements = this.state.elements.filter(dict => {\n          var pass = true;\n          var found = false;\n          let i;\n\n          for (i = 0; i < this.state.cuisineFilter.length; i++) if (!dict['category'].includes(this.state.cuisineFilter[i])) pass = false;\n\n          for (i = 0; i < this.state.locationFilter.length; i++) if (!dict['address'].includes(this.state.locationFilter[i])) pass = false;\n\n          for (i = 0; i < this.state.costFilter.length; i++) {\n            if (dict['price_range'] === this.state.costFilter[i]) found = true;\n            pass = found;\n          }\n\n          return pass;\n        });\n        this.setState({\n          elements\n        });\n      }\n    };\n\n    this.handleSelectCost = selectedOptionsCost => {\n      this.setState({\n        selectedOptionsCost\n      });\n      if (this.state.dropdownLabel === 'Cost' && selectedOptionsCost != null) this.setState({\n        costFilter: selectedOptionsCost.map(o => o.value)\n      });\n    };\n\n    this.handleSelectAddress = selectedOptionsAddress => {\n      this.setState({\n        selectedOptionsAddress\n      });\n      if (this.state.dropdownLabel === 'Location' && selectedOptionsAddress != null) this.setState({\n        locationFilter: selectedOptionsAddress.map(o => o.value)\n      });\n    };\n\n    this.handleSelectCuisine = selectedOptionsCuisine => {\n      this.setState({\n        selectedOptionsCuisine\n      });\n      if (this.state.dropdownLabel === 'Cuisine' && selectedOptionsCuisine != null) this.setState({\n        cuisineFilter: selectedOptionsCuisine.map(o => o.value)\n      });\n    };\n\n    this.state = {\n      elements: [],\n      resetElements: [],\n      searchElements: [],\n      page: 0,\n      link: '/RestaurantPage',\n      dropdownOpen: false,\n      midDropdownOpen: false,\n      dropdownLabel: 'Attributes',\n      cuisineFilter: [],\n      locationFilter: [],\n      costFilter: [],\n      filterKey: 'init',\n      min: null,\n      max: null,\n      selectedOptionsAddress: [],\n      selectedOptionsCost: [],\n      selectedOptionsCuisine: [],\n      searchParams: ''\n    };\n  }\n\n  componentDidMount() {\n    let url = 'https://cors-anywhere.herokuapp.com/http://api.foodforthoughtt.me/restaurant';\n    fetch(url).then(response => response.json()).then(data => {\n      console.log(data);\n      this.setState({\n        elements: data,\n        resetElements: data\n      });\n    });\n  }\n\n  render() {\n    var numElements = Math.max(this.state.elements.length, this.state.searchElements.length);\n    var filterComp;\n    var dropdownSet = new Set();\n    var dropdownList = [];\n\n    if (this.state.dropdownLabel === 'Cost') {\n      let i;\n\n      for (i = 0; i < this.state.elements.length; i++) {\n        var dict = this.state.elements[i];\n        var attributes = dict[this.state.filterKey].split(',');\n        let j;\n\n        for (j = 0; j < attributes.length; j++) dropdownSet.add(attributes[j]);\n      }\n\n      dropdownList = Array.from(dropdownSet);\n      var dictList = [];\n\n      for (i = 0; i < dropdownList.length; i++) {\n        dictList.push({\n          value: dropdownList[i],\n          label: dropdownList[i].charAt(0).toUpperCase() + dropdownList[i].slice(1)\n        });\n      }\n\n      filterComp = React.createElement(\"div\", {\n        style: {\n          width: '700px'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 230\n        },\n        __self: this\n      }, React.createElement(Select, {\n        className: \"ml-2\",\n        isMulti: true,\n        closeMenuOnSelect: false,\n        value: this.state.selectedOptionsCost,\n        onChange: this.handleSelectCost,\n        options: dictList,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 231\n        },\n        __self: this\n      }));\n    } else if (this.state.dropdownLabel === 'Cuisine') {\n      let i;\n\n      for (i = 0; i < this.state.elements.length; i++) {\n        var dict = this.state.elements[i];\n        var attributes = dict[this.state.filterKey].split(',');\n        let j;\n\n        for (j = 0; j < attributes.length; j++) dropdownSet.add(attributes[j]);\n      }\n\n      dropdownList = Array.from(dropdownSet);\n      var dictList = [];\n\n      for (i = 0; i < dropdownList.length; i++) {\n        dictList.push({\n          value: dropdownList[i],\n          label: dropdownList[i].charAt(0).toUpperCase() + dropdownList[i].slice(1)\n        });\n      }\n\n      filterComp = React.createElement(\"div\", {\n        style: {\n          width: '700px'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 248\n        },\n        __self: this\n      }, React.createElement(Select, {\n        className: \"ml-2\",\n        isMulti: true,\n        closeMenuOnSelect: false,\n        value: this.state.selectedOptionsCuisine,\n        onChange: this.handleSelectCuisine,\n        options: dictList,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 249\n        },\n        __self: this\n      }));\n    } else if (this.state.dropdownLabel === 'Location') {\n      let i;\n\n      for (i = 0; i < this.state.elements.length; i++) {\n        var dict = this.state.elements[i];\n        var attributes = dict[this.state.filterKey].split(',');\n        let j;\n\n        for (j = 0; j < attributes.length; j++) dropdownSet.add(attributes[j]);\n      }\n\n      dropdownList = Array.from(dropdownSet);\n      var dictList = [];\n\n      for (i = 0; i < dropdownList.length; i++) {\n        dictList.push({\n          value: dropdownList[i],\n          label: dropdownList[i].charAt(0).toUpperCase() + dropdownList[i].slice(1)\n        });\n      }\n\n      filterComp = React.createElement(\"div\", {\n        style: {\n          width: '700px'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 266\n        },\n        __self: this\n      }, React.createElement(Select, {\n        className: \"ml-2\",\n        isMulti: true,\n        closeMenuOnSelect: false,\n        value: this.state.selectedOptionsAddress,\n        onChange: this.handleSelectAddress,\n        options: dictList,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 267\n        },\n        __self: this\n      }));\n    } else {\n      filterComp = React.createElement(\"form\", {\n        class: \"form-inline\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 271\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        class: \"sr-only\",\n        for: \"inlineFormInputName2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 272\n        },\n        __self: this\n      }, \"Name\"), React.createElement(\"input\", {\n        type: \"number\",\n        min: \"0\",\n        name: \"min\",\n        value: this.state.min,\n        onChange: this.handleChange,\n        class: \"form-control mb-2 ml-4 mr-sm-2\",\n        id: \"inlineFormInputName2\",\n        placeholder: \"Min\",\n        style: {\n          width: '60px'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 273\n        },\n        __self: this\n      }), React.createElement(\"label\", {\n        class: \"sr-only\",\n        for: \"inlineFormInputName2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 274\n        },\n        __self: this\n      }, \"Name\"), React.createElement(\"input\", {\n        type: \"number\",\n        min: \"0\",\n        name: \"max\",\n        value: this.state.max,\n        onChange: this.handleChange,\n        class: \"form-control mb-2 ml-1 mr-sm-2\",\n        id: \"inlineFormInputName2\",\n        placeholder: \"Max\",\n        style: {\n          width: '60px'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 275\n        },\n        __self: this\n      }));\n    }\n\n    return React.createElement(\"div\", {\n      className: \"img-fluid\",\n      style: this.styles.background,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 281\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      class: \"display-1 mb-4\",\n      style: this.styles.header,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 282\n      },\n      __self: this\n    }, \"Restaurant \", this.state.costFilter, React.createElement(\"small\", {\n      style: {\n        color: 'orange'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 283\n      },\n      __self: this\n    }, \" (\", numElements, \")\")), React.createElement(\"div\", {\n      class: \"justify-content-md-center row mb-5\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 284\n      },\n      __self: this\n    }, React.createElement(Form, {\n      inline: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 285\n      },\n      __self: this\n    }, React.createElement(FormControl, {\n      onSubmit: this.search,\n      onChange: this.handleChange,\n      name: \"searchParams\",\n      value: this.state.searchParams,\n      type: \"text\",\n      placeholder: \"Search for retaurants\",\n      className: \"mr-sm-2\",\n      style: {\n        width: '350px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 286\n      },\n      __self: this\n    }), React.createElement(Button, {\n      style: {\n        color: 'black'\n      },\n      variant: \"warning\",\n      onClick: this.search,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 287\n      },\n      __self: this\n    }, \"Search\"))), React.createElement(\"div\", {\n      class: \"justify-content-md-center row mb-5\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 290\n      },\n      __self: this\n    }, React.createElement(Dropdown, {\n      isOpen: this.state.dropdownOpen,\n      toggle: this.toggle,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 291\n      },\n      __self: this\n    }, React.createElement(DropdownToggle, {\n      color: \"warning\",\n      caret: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 292\n      },\n      __self: this\n    }, this.state.dropdownLabel), React.createElement(DropdownMenu, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 295\n      },\n      __self: this\n    }, React.createElement(DropdownItem, {\n      onClick: this.changeFilterTag,\n      id: \"Cost\",\n      fkey: \"price_range\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 296\n      },\n      __self: this\n    }, \"Cost\"), React.createElement(DropdownItem, {\n      onClick: this.changeFilterTag,\n      id: \"Cuisine\",\n      fkey: \"category\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 297\n      },\n      __self: this\n    }, \"Cuisine\"), React.createElement(DropdownItem, {\n      onClick: this.changeFilterTag,\n      id: \"Location\",\n      fkey: \"address\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 298\n      },\n      __self: this\n    }, \"Location\"), React.createElement(DropdownItem, {\n      onClick: this.changeFilterTag,\n      id: \"Rating\",\n      fkey: \"rating\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 299\n      },\n      __self: this\n    }, \"Rating\"), React.createElement(DropdownItem, {\n      onClick: this.changeFilterTag,\n      id: \"Yelp Reviews\",\n      fkey: \"review_count\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 300\n      },\n      __self: this\n    }, \"Yelp Reviews\"))), filterComp, React.createElement(\"button\", {\n      class: \"btn btn-warning ml-4\",\n      onClick: this.applyFilter,\n      style: {\n        height: '37px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 304\n      },\n      __self: this\n    }, \"Filter\"), React.createElement(\"button\", {\n      class: \"btn btn-warning ml-4\",\n      onClick: this.sort,\n      style: {\n        height: '37px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 305\n      },\n      __self: this\n    }, \"Sort\"), React.createElement(\"button\", {\n      class: \"btn btn-primary ml-3\",\n      onClick: this.handleReset,\n      style: {\n        height: '37px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 306\n      },\n      __self: this\n    }, \"Reset\")), React.createElement(SearchCardGrid, {\n      link: this.state.link,\n      elements: this.state.searchElements,\n      params: this.state.searchParams,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 308\n      },\n      __self: this\n    }), React.createElement(RestaurantCardGrid, {\n      link: this.state.link,\n      elements: this.state.elements,\n      currentPage: this.state.page,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 309\n      },\n      __self: this\n    }), React.createElement(PageNav, {\n      label: \"Food Page Navigator\",\n      page: this.state.page,\n      decrementPage: this.decrementPage,\n      incrementPage: this.incrementPage,\n      lastPage: this.state.elements.length / 9,\n      goFirstPage: this.goFirstPage,\n      goLastPage: this.goLastPage,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 310\n      },\n      __self: this\n    }), React.createElement(\"p\", {\n      class: \"let\",\n      style: {\n        fontSize: 30,\n        color: 'aliceblue',\n        textAlign: 'center'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 312\n      },\n      __self: this\n    }, \"of \", Math.ceil(this.state.elements.length / 9)));\n  }\n\n}\n\nexport default Restaurant;","map":{"version":3,"sources":["/Users/murray/Developer/coursework/software_engineering_cs373/foodforthoughts/src/pages/restaurant.js"],"names":["React","Select","backImage","RestaurantCardGrid","PageNav","SearchCardGrid","Form","Button","FormControl","Dropdown","DropdownToggle","DropdownMenu","DropdownItem","Restaurant","Component","constructor","props","search","params","state","searchParams","split","searchElements","elements","filter","dict","found","key","i","length","toLowerCase","includes","toString","setState","compare","a","b","dropdownLabel","charAt","slice","sort","incrementPage","page","decrementPage","goFirstPage","goLastPage","Math","ceil","styles","image","width","height","background","backgroundImage","overflow","backgroundRepeat","backgroundPosition","backgroundSize","backgroundAttachment","header","textAlign","color","fontSize","toggle","prevState","dropdownOpen","toggleMid","midDropdownOpen","changeFilterTag","label","currentTarget","getAttribute","filterKey","handleChange","target","name","value","handleReset","resetElements","cuisineFilter","locationFilter","costFilter","selectedOptionsCuisine","selectedOptionsLocation","selectedOptionsCost","min","max","applyFilter","pass","handleSelectCost","map","o","handleSelectAddress","selectedOptionsAddress","handleSelectCuisine","link","componentDidMount","url","fetch","then","response","json","data","console","log","render","numElements","filterComp","dropdownSet","Set","dropdownList","attributes","j","add","Array","from","dictList","push","toUpperCase"],"mappings":"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","sourcesContent":["import React from 'react';\nimport Select from 'react-select';\nimport backImage from '../photos/rest_image.jpg';\nimport {RestaurantCardGrid} from \"../components/infocard.js\";\nimport {PageNav} from '../components/pageNav.js';\nimport {SearchCardGrid} from '../components/searchCard.js';\nimport {Form,Button, FormControl} from 'react-bootstrap';\nimport '../App.css';\nimport { Dropdown, DropdownToggle, DropdownMenu, DropdownItem } from 'reactstrap';\n\n\n\nclass Restaurant extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      elements: [],\n      resetElements: [],\n      searchElements: [],\n      page: 0,\n      link: '/RestaurantPage',\n      dropdownOpen: false,\n      midDropdownOpen: false,\n      dropdownLabel: 'Attributes',\n      cuisineFilter: [],\n      locationFilter: [],\n      costFilter: [],\n      filterKey: 'init',\n      min: null,\n      max: null,\n      selectedOptionsAddress: [],\n      selectedOptionsCost: [],\n      selectedOptionsCuisine: [],\n      searchParams: ''\n    }\n  }\n  \n  componentDidMount() {\n    let url = 'https://cors-anywhere.herokuapp.com/http://api.foodforthoughtt.me/restaurant';\n    fetch(url)\n    .then(response => response.json())\n    .then(data => {\n      console.log(data);\n      this.setState({elements: data, resetElements: data});\n    })\n  }\n\n  search = () => {\n    var params = this.state.searchParams.split(' ');\n    var searchElements = this.state.elements.filter(dict => \n      {\n        var found = false;\n        for(let key in dict) {\n          let i;\n          for(i=0; i<params.length; i++) {\n            if(typeof(dict[key]) == 'string' && dict[key].toLowerCase().includes((params[i]).toLowerCase()))\n              found = true;\n            else if(typeof(dict[key]) != 'string' && dict[key].toString().toLowerCase().includes((params[i]).toLowerCase()))\n              found = true;\n          }\n        }\n        return found;\n      });\n    this.setState({searchElements: searchElements, elements: []})\n\n  }\n\n  compare = (a, b) => {\n    let key = 'name';\n    if (this.state.dropdownLabel != 'Attributes') {\n      key = this.state.dropdownLabel.charAt(0).toLowerCase() + this.state.dropdownLabel.slice(1);\n    }\n    if ( a[key] < b[key] ){\n      return -1;\n    }\n    if ( a[key] > b[key] ){\n      return 1;\n    }\n    return 0;\n  }\n\n  sort = () => {\n    this.setState({elements: this.state.elements.sort(this.compare)});\n  }\n  \n  incrementPage = () => {\n    const page = this.state.page + 1;\n    this.setState({page});\n  }\n\n  decrementPage = () => {\n    const page = this.state.page - 1;\n    this.setState({page});\n  }\n\n  goFirstPage = () => {\n    const page = 0;\n    this.setState({page});\n  }\n\n  goLastPage = () => {\n    const page = Math.ceil(this.state.elements.length/9) - 1;\n    this.setState({page});\n  }\n\n  styles = {\n    image: {\n      width: 200,\n      height: 150,\n    },\n\n    background:{\n      backgroundImage: `url(${backImage}`,\n      height: '210vh', // 220 vh\n      width: '100vw',\n      overflow: 'auto',\n      backgroundRepeat: 'no-repeat',\n      backgroundPosition: 'center',\n      backgroundSize: 'cover',\n      backgroundAttachment: 'fixed'\n    },\n\n    header: {\n      textAlign: 'center',\n      color: 'aliceblue',\n      fontSize: 150\n    },\n  };\n  toggle = () => {\n    this.setState(prevState => ({\n      dropdownOpen: !prevState.dropdownOpen\n    }));\n  }\n\n  toggleMid = () => {\n    this.setState(prevState => ({\n      midDropdownOpen: !prevState.midDropdownOpen\n    }));\n  }\n  \n  changeFilterTag = (label) => {\n    this.setState({dropdownLabel: label.currentTarget.getAttribute(\"id\"), filterKey: label.currentTarget.getAttribute(\"fkey\")})\n  }\n  \n  handleChange = ({target}) => {\n    this.setState({[target.name]: target.value})\n  }\n  \n  handleReset = () => {\n    this.setState({\n      elements: this.state.resetElements,\n      searchElements: [], \n      cuisineFilter: [], \n      locationFilter: [], \n      costFilter: [],\n      selectedOptionsCuisine: [], \n      selectedOptionsLocation: [],\n      selectedOptionsCost: [],\n      min: null,\n      max: null\n    })\n  }\n  \n  applyFilter = () => {\n    if(this.state.dropdownLabel === 'Rating' || this.state.dropdownLabel === 'Yelp Reviews') {\n      var elements = this.state.elements.filter(dict => {\n          return (dict[this.state.filterKey] >= this.state.min && dict[this.state.filterKey] <= this.state.max)   \n        })\n      this.setState({elements})\n    }\n    else {\n      var elements = this.state.elements.filter(dict => {\n          var pass = true;\n          var found = false;\n          let i;\n          for(i=0; i<this.state.cuisineFilter.length; i++)\n            if(!dict['category'].includes(this.state.cuisineFilter[i]))\n              pass = false;\n          for(i=0; i<this.state.locationFilter.length; i++)\n            if(!dict['address'].includes(this.state.locationFilter[i]))\n              pass = false;\n          for(i=0; i<this.state.costFilter.length; i++) {\n            if(dict['price_range'] === (this.state.costFilter[i]))\n              found = true;\n            pass = found;\n          }\n          return pass;\n      })\n      this.setState({elements})\n    }\n  }\n\n  handleSelectCost = (selectedOptionsCost) => {\n    this.setState({selectedOptionsCost});\n    if(this.state.dropdownLabel === 'Cost' && selectedOptionsCost != null)\n      this.setState({costFilter: selectedOptionsCost.map(o => o.value)})\n  }\n\n  handleSelectAddress = (selectedOptionsAddress) => {\n    this.setState({selectedOptionsAddress})\n    if(this.state.dropdownLabel === 'Location' && selectedOptionsAddress!= null)\n      this.setState({locationFilter: selectedOptionsAddress.map(o => o.value)})\n  }\n\n  handleSelectCuisine = (selectedOptionsCuisine) => {\n    this.setState({selectedOptionsCuisine})\n    if(this.state.dropdownLabel === 'Cuisine' && selectedOptionsCuisine!= null)\n      this.setState({cuisineFilter: selectedOptionsCuisine.map(o => o.value)})\n  }\n\n  render() {\n    var numElements = Math.max(this.state.elements.length, this.state.searchElements.length);\n    var filterComp;\n    var dropdownSet = new Set();\n    var dropdownList = [];\n    if(this.state.dropdownLabel === 'Cost') {\n      let i;\n      for (i=0; i<this.state.elements.length; i++) {\n        var dict = this.state.elements[i];\n        var attributes = dict[this.state.filterKey].split(',');\n        let j;\n        for(j=0; j<attributes.length; j++)\n          dropdownSet.add(attributes[j]);\n      }\n      dropdownList = Array.from(dropdownSet);\n      var dictList = [];\n      for(i=0; i<dropdownList.length; i++){\n        dictList.push({value: dropdownList[i], label: dropdownList[i].charAt(0).toUpperCase() + dropdownList[i].slice(1)});\n      }\n      filterComp = <div style={{width: '700px'}}>\n      <Select className=\"ml-2\" isMulti closeMenuOnSelect={false} value={this.state.selectedOptionsCost} onChange={this.handleSelectCost} options={dictList}/>\n      </div>;\n    }\n    else if(this.state.dropdownLabel === 'Cuisine') {\n      let i;\n      for (i=0; i<this.state.elements.length; i++) {\n        var dict = this.state.elements[i];\n        var attributes = dict[this.state.filterKey].split(',');\n        let j;\n        for(j=0; j<attributes.length; j++)\n          dropdownSet.add(attributes[j]);\n      }\n      dropdownList = Array.from(dropdownSet);\n      var dictList = [];\n      for(i=0; i<dropdownList.length; i++){\n        dictList.push({value: dropdownList[i], label: dropdownList[i].charAt(0).toUpperCase() + dropdownList[i].slice(1)});\n      }\n      filterComp = <div style={{width: '700px'}}>\n      <Select className=\"ml-2\" isMulti closeMenuOnSelect={false} value={this.state.selectedOptionsCuisine} onChange={this.handleSelectCuisine} options={dictList}/>\n      </div>;\n    }\n    else if(this.state.dropdownLabel === 'Location') {\n      let i;\n      for (i=0; i<this.state.elements.length; i++) {\n        var dict = this.state.elements[i];\n        var attributes = dict[this.state.filterKey].split(',');\n        let j;\n        for(j=0; j<attributes.length; j++)\n          dropdownSet.add(attributes[j]);\n      }\n      dropdownList = Array.from(dropdownSet);\n      var dictList = [];\n      for(i=0; i<dropdownList.length; i++){\n        dictList.push({value: dropdownList[i], label: dropdownList[i].charAt(0).toUpperCase() + dropdownList[i].slice(1)});\n      }\n      filterComp = <div style={{width: '700px'}}>\n      <Select className=\"ml-2\" isMulti closeMenuOnSelect={false} value={this.state.selectedOptionsAddress} onChange={this.handleSelectAddress} options={dictList}/>\n      </div>;\n    }\n    else {\n      filterComp = <form class=\"form-inline\">\n      <label class=\"sr-only\" for=\"inlineFormInputName2\">Name</label>\n      <input type=\"number\" min=\"0\" name=\"min\" value={this.state.min} onChange={this.handleChange} class=\"form-control mb-2 ml-4 mr-sm-2\" id=\"inlineFormInputName2\" placeholder=\"Min\" style={{width: '60px'}}></input>\n      <label class=\"sr-only\" for=\"inlineFormInputName2\">Name</label>\n      <input type=\"number\" min=\"0\" name=\"max\" value={this.state.max} onChange={this.handleChange} class=\"form-control mb-2 ml-1 mr-sm-2\" id=\"inlineFormInputName2\" placeholder=\"Max\" style={{width: '60px'}}></input>\n      </form>;\n    }\n    return (\n      \n      \n      <div className=\"img-fluid\" style={this.styles.background}>\n        <h1 class=\"display-1 mb-4\" style={this.styles.header}>Restaurant {this.state.costFilter}\n        <small style={{color:'orange'}}> ({numElements})</small></h1>\n          <div class=\"justify-content-md-center row mb-5\">\n            <Form inline>\n                  <FormControl onSubmit={this.search} onChange={this.handleChange} name=\"searchParams\" value={this.state.searchParams} type=\"text\" placeholder=\"Search for retaurants\" className=\"mr-sm-2\" style={{width: '350px'}} />\n                  <Button style={{color: 'black'}} variant=\"warning\" onClick={this.search}>Search</Button>\n            </Form>\n          </div>\n          <div class=\"justify-content-md-center row mb-5\">\n          <Dropdown isOpen={this.state.dropdownOpen} toggle={this.toggle}>\n            <DropdownToggle color=\"warning\" caret>\n              {this.state.dropdownLabel}\n            </DropdownToggle>\n            <DropdownMenu>\n              <DropdownItem onClick={this.changeFilterTag} id='Cost' fkey='price_range'>Cost</DropdownItem>\n              <DropdownItem onClick={this.changeFilterTag} id='Cuisine' fkey='category'>Cuisine</DropdownItem>\n              <DropdownItem onClick={this.changeFilterTag} id='Location' fkey='address'>Location</DropdownItem>\n              <DropdownItem onClick={this.changeFilterTag} id='Rating' fkey='rating'>Rating</DropdownItem>\n              <DropdownItem onClick={this.changeFilterTag} id='Yelp Reviews' fkey='review_count'>Yelp Reviews</DropdownItem>\n            </DropdownMenu>\n          </Dropdown>\n          {filterComp}\n          <button class=\"btn btn-warning ml-4\" onClick={this.applyFilter} style={{height: '37px'}}>Filter</button>\n          <button class=\"btn btn-warning ml-4\" onClick={this.sort} style={{height: '37px'}}>Sort</button>\n          <button class=\"btn btn-primary ml-3\" onClick={this.handleReset} style={{height: '37px'}}>Reset</button>\n        </div> \n        <SearchCardGrid link={this.state.link} elements={this.state.searchElements} params={this.state.searchParams}/>\n        <RestaurantCardGrid link={this.state.link} elements={this.state.elements} currentPage={this.state.page}/>\n        <PageNav label='Food Page Navigator' page={this.state.page} decrementPage = {this.decrementPage}\n         incrementPage = {this.incrementPage} lastPage={this.state.elements.length/9} goFirstPage = {this.goFirstPage} goLastPage = {this.goLastPage}/>\n        <p class=\"let\" style={{fontSize: 30, color: 'aliceblue', textAlign: 'center'}}>of {Math.ceil(this.state.elements.length/9)}</p>\n      </div> \n    )\n  }\n}\n\nexport default Restaurant"]},"metadata":{},"sourceType":"module"}