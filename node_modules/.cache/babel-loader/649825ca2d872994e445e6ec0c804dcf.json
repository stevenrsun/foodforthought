{"ast":null,"code":"var _jsxFileName = \"/u/kelvinyu/CS373/foodforthought/foodforthoughts/src/components/BarChart.js\";\nimport React, { Component } from 'react';\nimport * as d3 from \"d3\";\nimport d3Tip from \"d3-tip\"; //This code is modified from Simple d3.js bar chart D3: http://bl.ocks.org/d3noob/8952219#bar-data.csv\n//with rainbow function from this codepen: https://codepen.io/chadoh/pen/NRXpKw\n\nclass BarChart extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLoaded: false,\n      bottomText: \"Loading...\"\n    };\n  }\n\n  drawBarGraph() {\n    var margin = {\n      top: 20,\n      right: 20,\n      bottom: 70,\n      left: 40\n    },\n        width = 600 - margin.left - margin.right,\n        height = 300 - margin.top - margin.bottom; // Parse the date / time\n\n    var parseDate = d3.time.format(\"%Y-%m\").parse;\n    var x = d3.scale.ordinal().rangeRoundBands([0, width], .05);\n    var y = d3.scale.linear().range([height, 0]);\n    var xAxis = d3.svg.axis().scale(x).orient(\"bottom\").tickFormat(d3.time.format(\"%Y-%m\"));\n    var yAxis = d3.svg.axis().scale(y).orient(\"left\").ticks(10);\n    var svg = d3.select(\"body\").append(\"svg\").attr(\"width\", width + margin.left + margin.right).attr(\"height\", height + margin.top + margin.bottom).append(\"g\").attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\");\n    d3.csv(\"bar-data.csv\", function (error, data) {\n      data.forEach(function (d) {\n        d.date = parseDate(d.date);\n        d.value = +d.value;\n      });\n      x.domain(data.map(function (d) {\n        return d.date;\n      }));\n      y.domain([0, d3.max(data, function (d) {\n        return d.value;\n      })]);\n      svg.append(\"g\").attr(\"class\", \"x axis\").attr(\"transform\", \"translate(0,\" + height + \")\").call(xAxis).selectAll(\"text\").style(\"text-anchor\", \"end\").attr(\"dx\", \"-.8em\").attr(\"dy\", \"-.55em\").attr(\"transform\", \"rotate(-90)\");\n      svg.append(\"g\").attr(\"class\", \"y axis\").call(yAxis).append(\"text\").attr(\"transform\", \"rotate(-90)\").attr(\"y\", 6).attr(\"dy\", \".71em\").style(\"text-anchor\", \"end\").text(\"Value ($)\");\n      svg.selectAll(\"bar\").data(data).enter().append(\"rect\").style(\"fill\", \"steelblue\").attr(\"x\", function (d) {\n        return x(d.date);\n      }).attr(\"width\", x.rangeBand()).attr(\"y\", function (d) {\n        return y(d.value);\n      }).attr(\"height\", function (d) {\n        return height - y(d.value);\n      });\n    });\n  }\n\n  componentDidUpdate() {\n    if (this.props.isLoaded && !this.state.isLoaded) {\n      this.drawBarGraph();\n      this.setState({\n        isLoaded: true,\n        bottomText: this.props.x\n      });\n    }\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109\n      },\n      __self: this\n    }, this.state.bottomText), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110\n      },\n      __self: this\n    }));\n  }\n\n}\n\nexport default BarChart;","map":{"version":3,"sources":["/u/kelvinyu/CS373/foodforthought/foodforthoughts/src/components/BarChart.js"],"names":["React","Component","d3","d3Tip","BarChart","constructor","props","state","isLoaded","bottomText","drawBarGraph","margin","top","right","bottom","left","width","height","parseDate","time","format","parse","x","scale","ordinal","rangeRoundBands","y","linear","range","xAxis","svg","axis","orient","tickFormat","yAxis","ticks","select","append","attr","csv","error","data","forEach","d","date","value","domain","map","max","call","selectAll","style","text","enter","rangeBand","componentDidUpdate","setState","render"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport * as d3 from \"d3\";\nimport d3Tip  from \"d3-tip\";\n\n\n//This code is modified from Simple d3.js bar chart D3: http://bl.ocks.org/d3noob/8952219#bar-data.csv\n//with rainbow function from this codepen: https://codepen.io/chadoh/pen/NRXpKw\n\nclass BarChart extends Component\n{\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLoaded: false,\n      bottomText: \"Loading...\"\n    }\n  }\n\n  drawBarGraph()\n  {\n    var margin = {top: 20, right: 20, bottom: 70, left: 40},\n    width = 600 - margin.left - margin.right,\n    height = 300 - margin.top - margin.bottom;\n\n// Parse the date / time\nvar\tparseDate = d3.time.format(\"%Y-%m\").parse;\n\nvar x = d3.scale.ordinal().rangeRoundBands([0, width], .05);\n\nvar y = d3.scale.linear().range([height, 0]);\n\nvar xAxis = d3.svg.axis()\n    .scale(x)\n    .orient(\"bottom\")\n    .tickFormat(d3.time.format(\"%Y-%m\"));\n\nvar yAxis = d3.svg.axis()\n    .scale(y)\n    .orient(\"left\")\n    .ticks(10);\n\nvar svg = d3.select(\"body\").append(\"svg\")\n    .attr(\"width\", width + margin.left + margin.right)\n    .attr(\"height\", height + margin.top + margin.bottom)\n  .append(\"g\")\n    .attr(\"transform\", \n          \"translate(\" + margin.left + \",\" + margin.top + \")\");\n\nd3.csv(\"bar-data.csv\", function(error, data) {\n\n    data.forEach(function(d) {\n        d.date = parseDate(d.date);\n        d.value = +d.value;\n    });\n\t\n  x.domain(data.map(function(d) { return d.date; }));\n  y.domain([0, d3.max(data, function(d) { return d.value; })]);\n\n  svg.append(\"g\")\n      .attr(\"class\", \"x axis\")\n      .attr(\"transform\", \"translate(0,\" + height + \")\")\n      .call(xAxis)\n    .selectAll(\"text\")\n      .style(\"text-anchor\", \"end\")\n      .attr(\"dx\", \"-.8em\")\n      .attr(\"dy\", \"-.55em\")\n      .attr(\"transform\", \"rotate(-90)\" );\n\n  svg.append(\"g\")\n      .attr(\"class\", \"y axis\")\n      .call(yAxis)\n    .append(\"text\")\n      .attr(\"transform\", \"rotate(-90)\")\n      .attr(\"y\", 6)\n      .attr(\"dy\", \".71em\")\n      .style(\"text-anchor\", \"end\")\n      .text(\"Value ($)\");\n\n  svg.selectAll(\"bar\")\n      .data(data)\n    .enter().append(\"rect\")\n      .style(\"fill\", \"steelblue\")\n      .attr(\"x\", function(d) { return x(d.date); })\n      .attr(\"width\", x.rangeBand())\n      .attr(\"y\", function(d) { return y(d.value); })\n      .attr(\"height\", function(d) { return height - y(d.value); });\n\n});\n  }\n\n\n  componentDidUpdate ()\n  {\n    if (this.props.isLoaded && !this.state.isLoaded)\n    {\n      this.drawBarGraph();\n      \n      this.setState({\n        isLoaded : true,\n        bottomText: this.props.x,\n      });\n    }\n  }\n\n\n  render() {\n    return (\n      <div>\n      <h2>{this.state.bottomText}</h2>\n        <br/>\n      </div>\n    );\n  }\n}\n\nexport default BarChart;\n"]},"metadata":{},"sourceType":"module"}