{"ast":null,"code":"var _jsxFileName = \"/Users/murray/Developer/coursework/software_engineering_cs373/foodforthoughts/src/components/BarChart.js\";\nimport React, { Component } from 'react';\nimport * as d3 from \"d3\";\nimport d3Tip from \"d3-tip\"; //This code is modified from Simple d3.js bar chart D3: http://bl.ocks.org/d3noob/8952219#bar-data.csv\n//with rainbow function from this codepen: https://codepen.io/chadoh/pen/NRXpKw\n\nclass BarChart extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLoaded: false,\n      bottomText: \"Loading...\"\n    };\n  }\n\n  componentDidMount() {\n    var data = []; // call API\n\n    let url = 'https://cors-anywhere.herokuapp.com/http://api.foodforthoughtt.me/food';\n    fetch(url).then(response => response.json()).then(data => {\n      for (let i = 0; i < data.length; i++) {\n        console.log(data[i]['calories']);\n        data.push(data[i]['calories']);\n      }\n\n      this.setState({\n        elements: data,\n        resetElements: data\n      });\n    });\n    this.drawBarChart(data);\n  }\n\n  drawBarChart(data) {\n    const canvasHeight = 400;\n    const canvasWidth = 600;\n    const scale = 20;\n    const svgCanvas = d3.select(this.refs.canvas).append(\"svg\").attr(\"width\", canvasWidth).attr(\"height\", canvasHeight).style(\"border\", \"1px solid black\");\n    svgCanvas.selectAll(\"rect\").data(data).enter().append(\"rect\").attr(\"width\", 40).attr(\"height\", datapoint => datapoint * scale).attr(\"fill\", \"orange\").attr(\"x\", (datapoint, iteration) => iteration * 45).attr(\"y\", datapoint => canvasHeight - datapoint * scale);\n    svgCanvas.selectAll(\"text\").data(data).enter().append(\"text\").attr(\"x\", (dataPoint, i) => i * 45 + 10).attr(\"y\", (dataPoint, i) => canvasHeight - dataPoint * scale - 10).text(dataPoint => dataPoint);\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      ref: \"canvas\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64\n      },\n      __self: this\n    });\n  }\n\n}\n\nexport default BarChart;","map":{"version":3,"sources":["/Users/murray/Developer/coursework/software_engineering_cs373/foodforthoughts/src/components/BarChart.js"],"names":["React","Component","d3","d3Tip","BarChart","constructor","props","state","isLoaded","bottomText","componentDidMount","data","url","fetch","then","response","json","i","length","console","log","push","setState","elements","resetElements","drawBarChart","canvasHeight","canvasWidth","scale","svgCanvas","select","refs","canvas","append","attr","style","selectAll","enter","datapoint","iteration","dataPoint","text","render"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAO,KAAKC,EAAZ,MAAoB,IAApB;AACA,OAAOC,KAAP,MAAmB,QAAnB,C,CAIA;AACA;;AAEA,MAAMC,QAAN,SAAuBH,SAAvB,CACA;AACEI,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACjB,UAAMA,KAAN;AACA,SAAKC,KAAL,GACA;AACEC,MAAAA,QAAQ,EAAE,KADZ;AAEEC,MAAAA,UAAU,EAAE;AAFd,KADA;AAKD;;AACDC,EAAAA,iBAAiB,GAAG;AAClB,QAAIC,IAAI,GAAG,EAAX,CADkB,CAElB;;AACA,QAAIC,GAAG,GAAG,wEAAV;AACAC,IAAAA,KAAK,CAACD,GAAD,CAAL,CACCE,IADD,CACMC,QAAQ,IAAIA,QAAQ,CAACC,IAAT,EADlB,EAECF,IAFD,CAEMH,IAAI,IAAI;AACZ,WAAK,IAAIM,CAAC,GAAC,CAAX,EAAcA,CAAC,GAAGN,IAAI,CAACO,MAAvB,EAA+BD,CAAC,EAAhC,EAAoC;AAClCE,QAAAA,OAAO,CAACC,GAAR,CAAYT,IAAI,CAACM,CAAD,CAAJ,CAAQ,UAAR,CAAZ;AACAN,QAAAA,IAAI,CAACU,IAAL,CAAUV,IAAI,CAACM,CAAD,CAAJ,CAAQ,UAAR,CAAV;AACD;;AACD,WAAKK,QAAL,CAAc;AAACC,QAAAA,QAAQ,EAAEZ,IAAX;AAAiBa,QAAAA,aAAa,EAAEb;AAAhC,OAAd;AACD,KARD;AAUA,SAAKc,YAAL,CAAkBd,IAAlB;AACD;;AAEDc,EAAAA,YAAY,CAACd,IAAD,EAAQ;AAClB,UAAMe,YAAY,GAAG,GAArB;AACA,UAAMC,WAAW,GAAG,GAApB;AACA,UAAMC,KAAK,GAAG,EAAd;AACA,UAAMC,SAAS,GAAG3B,EAAE,CAAC4B,MAAH,CAAU,KAAKC,IAAL,CAAUC,MAApB,EACbC,MADa,CACN,KADM,EAEbC,IAFa,CAER,OAFQ,EAECP,WAFD,EAGbO,IAHa,CAGR,QAHQ,EAGER,YAHF,EAIbS,KAJa,CAIP,QAJO,EAIG,iBAJH,CAAlB;AAKAN,IAAAA,SAAS,CAACO,SAAV,CAAoB,MAApB,EACKzB,IADL,CACUA,IADV,EACgB0B,KADhB,GAESJ,MAFT,CAEgB,MAFhB,EAGSC,IAHT,CAGc,OAHd,EAGuB,EAHvB,EAISA,IAJT,CAIc,QAJd,EAIyBI,SAAD,IAAeA,SAAS,GAAGV,KAJnD,EAKSM,IALT,CAKc,MALd,EAKsB,QALtB,EAMSA,IANT,CAMc,GANd,EAMmB,CAACI,SAAD,EAAYC,SAAZ,KAA0BA,SAAS,GAAG,EANzD,EAOSL,IAPT,CAOc,GAPd,EAOoBI,SAAD,IAAeZ,YAAY,GAAGY,SAAS,GAAGV,KAP7D;AASAC,IAAAA,SAAS,CAACO,SAAV,CAAoB,MAApB,EACGzB,IADH,CACQA,IADR,EACc0B,KADd,GAEOJ,MAFP,CAEc,MAFd,EAGOC,IAHP,CAGY,GAHZ,EAGiB,CAACM,SAAD,EAAYvB,CAAZ,KAAkBA,CAAC,GAAG,EAAJ,GAAS,EAH5C,EAIOiB,IAJP,CAIY,GAJZ,EAIiB,CAACM,SAAD,EAAYvB,CAAZ,KAAkBS,YAAY,GAAGc,SAAS,GAAGZ,KAA3B,GAAmC,EAJtE,EAKOa,IALP,CAKYD,SAAS,IAAIA,SALzB;AAMD;;AAEDE,EAAAA,MAAM,GAAG;AACP,WAAO;AAAK,MAAA,GAAG,EAAC,QAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAAP;AACD;;AAtDH;;AAyDA,eAAetC,QAAf","sourcesContent":["import React, { Component } from 'react';\nimport * as d3 from \"d3\";\nimport d3Tip  from \"d3-tip\";\n\n\n\n//This code is modified from Simple d3.js bar chart D3: http://bl.ocks.org/d3noob/8952219#bar-data.csv\n//with rainbow function from this codepen: https://codepen.io/chadoh/pen/NRXpKw\n\nclass BarChart extends Component\n{\n  constructor(props) {\n    super(props);\n    this.state =\n    {\n      isLoaded: false,\n      bottomText: \"Loading...\",\n    };\n  }\n  componentDidMount() {\n    var data = []\n    // call API\n    let url = 'https://cors-anywhere.herokuapp.com/http://api.foodforthoughtt.me/food';\n    fetch(url)\n    .then(response => response.json())\n    .then(data => {\n      for (let i=0; i < data.length; i++) {\n        console.log(data[i]['calories'])\n        data.push(data[i]['calories'])\n      }\n      this.setState({elements: data, resetElements: data});\n    })\n\n    this.drawBarChart(data)\n  }\n\n  drawBarChart(data)  {\n    const canvasHeight = 400\n    const canvasWidth = 600\n    const scale = 20\n    const svgCanvas = d3.select(this.refs.canvas)\n        .append(\"svg\")\n        .attr(\"width\", canvasWidth)\n        .attr(\"height\", canvasHeight)\n        .style(\"border\", \"1px solid black\")\n    svgCanvas.selectAll(\"rect\")\n        .data(data).enter()\n            .append(\"rect\")\n            .attr(\"width\", 40)\n            .attr(\"height\", (datapoint) => datapoint * scale)\n            .attr(\"fill\", \"orange\")\n            .attr(\"x\", (datapoint, iteration) => iteration * 45)\n            .attr(\"y\", (datapoint) => canvasHeight - datapoint * scale)\n    \n    svgCanvas.selectAll(\"text\")\n      .data(data).enter()\n          .append(\"text\")\n          .attr(\"x\", (dataPoint, i) => i * 45 + 10)\n          .attr(\"y\", (dataPoint, i) => canvasHeight - dataPoint * scale - 10)\n          .text(dataPoint => dataPoint)\n  }\n\n  render() { \n    return <div ref=\"canvas\"></div> \n  }\n}\n\nexport default BarChart;\n"]},"metadata":{},"sourceType":"module"}