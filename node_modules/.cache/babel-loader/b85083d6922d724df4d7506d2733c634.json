{"ast":null,"code":"var createSizzle = require(\"./sizzle\");\n\nexports.applyQuerySelector = function (doc, dom) {\n  var addSizzle = function (document) {\n    if (!document._sizzle) {\n      document._sizzle = createSizzle(document);\n    }\n\n    return document._sizzle;\n  };\n\n  doc.querySelector = function (selector) {\n    return addSizzle(this)(selector, this)[0];\n  };\n\n  doc.querySelectorAll = function (selector) {\n    return new dom.NodeList(addSizzle(this)(selector, this));\n  };\n\n  var _createElement = doc.createElement;\n\n  doc.createElement = function () {\n    var element = _createElement.apply(this, arguments);\n\n    element.querySelector = function (selector) {\n      return addSizzle(this.ownerDocument)(selector, this)[0];\n    };\n\n    element.querySelectorAll = function (selector) {\n      var el = this;\n\n      if (!this.parentNode) {\n        el = this.ownerDocument.createElement(\"div\");\n        el.appendChild(this);\n      }\n\n      return new dom.NodeList(addSizzle(this.ownerDocument)(selector, el.parentNode || el));\n    };\n\n    return element;\n  };\n};","map":null,"metadata":{},"sourceType":"script"}